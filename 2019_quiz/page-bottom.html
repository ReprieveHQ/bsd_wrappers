<div class='fieldset optinradio_fieldset'><label class='optin_lang'>Would you like to receive updates about our news, campaigns and appeals by email? <a href='http://www.reprieve.org.uk/privacy/' target='_blank'>(see our privacy policy)</a></label>
  <label for='optin_1'><input id='optin_1' class='optinradio' name='optin' value='Yes' type='radio'>Yes</label>
  <label for='optin_0'><input id='optin_0' class='optinradio' name='optin' value='No' type='radio'>No</label>
  <p id='optin_warning'>Don't want to hear from us? If you're already on our mailing list, selecting this option may unsubscribe you from our alerts.</p>
</div>
</div>
</div>
</div>
</div>

<div class="slide10 slide darkslide shareslide" style="display: none;">



  <div class="container">
    <div class="row">
      <div class="col-md">
        <h2>You got <span id="scorePrint">0</span> out of 7 correct.</h2>
        <div class="row">
          <div class="col-md-12">
            <button class="outline button answer_reveal">Your answer breakdown</button>
          </div>
        </div>
        <div class="answer_reveal_wrap">
          <div class="row">

            <div class="col-md">
              <p class="q1tpp qtpp">Q1. <span class="q1tpm">1999</span> <span class="q1tpl">(You said <span class="q1tp"></span>)</span>
              </p>
              <p class="qdec">Insert explaination here</p>
              <p class="q2tpp qtpp">Q2. <span class="q2tpm">2019</span> <span class="q2tpl">(You said <span class="q2tp"></span>)</span>
              </p>
            <p class="qdec">Insert explaination here</p>
              <p class="q3tpp qtpp">Q3. <span class="q3tpm">2019</span> <span class="q3tpl">(You said <span class="q3tp"></span>)</span>
              </p>
            <p class="qdec">Insert explaination here</p>
              <p class="q4tpp qtpp">Q4. <span class="q4tpm">1999</span> <span class="q4tpl">(You said <span class="q4tp"></span>)</span>
              </p>
    <p class="qdec">Insert explaination here</p>

            </div>
            <div class="col-md">
              <p class="q5tpp qtpp">Q5. <span class="q5tpm">2019</span> <span class="q5tpl">(You said <span class="q5tp"></span>)</span>
              </p>
            <p class="qdec">Insert explaination here</p>
              <p class="q6tpp qtpp">Q6. <span class="q6tpm">2019</span> <span class="q6tpl">(You said <span class="q6tp"></span>)</span>
              </p>
            <p class="qdec">Insert explaination here</p>
              <p class="q7tpp qtpp">Q7. <span class="q7tpm">1999</span> <span class="q7tpl">(You said <span class="q7tp"></span>)</span>
              </p>
          <p class="qdec">Insert explaination here</p>
            </div>
          </div>
        </div>
        <h3>Can you share with your friends so they can take part?</h3>
        <div class="row">
          <div class="col-md-5">
            <button class="solid button facebook_share" onclick="return submitAndShare();">Share on Facebook</button>
          </div>
          <div class="col-md-5">
            <button class="solid button twitter_share">Share on Twitter</button>
          </div>
          <div class="col-md-2">
            <button class="outline button answer_skip">Skip</button>
          </div>
        </div>

      </div>
    </div>

  </div>

</div>


<div class="slide11 slide darkslide donateslide" style="display: none;">
  <div class="container">
    <div class="row">
      <div class="col-md">
        <!-- TODO: Add text to convince people to donate below! You may not need three lines, so feel free to delete the <p></p> section if not. -->
        <div class="unsigned">
          <h2>Can you help make our life-saving work possible?</h2>
          <p>We fund the litigation, expert witnesses and investigations which help to deliver justice and save lives across the globe.</p>
          <p>Can you make a donation today so we can continue to help victims of injustice?</p>

        </div>

        <!-- TODO: Change URLs below to URL of relevant donation page. PLEASE rememember to create a source code. -->

        <div class="donate-tab-container">
          <div class="donate-tab-top clearfix">
            <div class="donate-tab-gm donate-tab picked-tab">
              <h2>Give Monthly</h2>
            </div>
            <div class="donate-tab-gn donate-tab">
              <h2>Give Now</h2>
            </div>
          </div>
          <div class="donate-tab-main clearfix">
            <div class="donate-tab-givemonthly donate-tab-body picked-body">
              <p>Giving monthly helps us fund long-term projects and cases.</p>
              <a class="button solid small donateButton donateMButton" href="https://secure.edirectdebit.com/Reprieve/Donate4/?ref=joinemaildmslide&amount=5">£5</button>
                <a class="button solid small donateButton donateMButton" href="https://secure.edirectdebit.com/Reprieve/Donate4/?ref=joinemaildmslide&amount=10">£10</button>
                  <a class="button solid small donateButton donateMButton" href="https://secure.edirectdebit.com/Reprieve/Donate4/?ref=joinemaildmslide&amount=15">£15</button>
                    <a class="button outline small donateButton donateMButton" href="https://secure.edirectdebit.com/Reprieve/Donate4/?ref=joinemaildmslide">Other</button>
            </div>
            <div class="donate-tab-givenow donate-tab-body">
              <p>Give an individual donation now to fund our most urgent cases.</p>
              <a class="button solid small donateButton donateNButton" href="https://act.reprieve.org.uk/page/contribute/email-thank-you?source=joinemaildnslide&default_amt=15">£15</button>
                <a class="button solid small donateButton donateNButton" href="https://act.reprieve.org.uk/page/contribute/email-thank-you?source=joinemaildnslide&default_amt=25">£25</button>
                  <a class="button solid small donateButton donateNButton" href="https://act.reprieve.org.uk/page/contribute/email-thank-you?source=joinemaildnslide&default_amt=50">£50</button>
                    <a class="button outline small donateButton donateNButton" href="https://act.reprieve.org.uk/page/contribute/email-thank-you?source=joinemaildnslide">Other</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>
<script type="text/javascript" async src="https://platform.twitter.com/widgets.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"></script>
<script>
  // Progress bar

  jQuery(document).ready(function($) {

    // Set country from parameter

    // Construct URL object using current browser URL
    var url = new URL(document.location);

    // Get query parameters object
    var params = url.searchParams;

    // Get value of country
    var countryurl = params.get("country");

    if (countryurl === null) {
      $("#country").val("GB");
    } else if (countryurl === "US") {
      $("#country").val(countryurl);
      $(".usdonate").show();
      $(".ukdonate").hide();
    } else {
      $("#country").val(countryurl);
    }

    // US Donate

    var optionSelected = $("#country option:selected").val();

    $("#country").on("change", function(e) {
      console.log("CHANGE IS A-COMING!");
      var optionSelected = $("#country option:selected").val();
      if (optionSelected === "US") {
        $(".usdonate").show();
        $(".ukdonate").hide();
      } else {
        $(".usdonate").hide();
        $(".ukdonate").show();
      }
    });

    function count_signups(signup_form_id) {

      // This function formats numbers by adding commas
      function numberFormat(nStr, prefix) {
        var prefix = prefix || '';
        nStr += '';
        x = nStr.split('.');
        x1 = x[0];
        x2 = x.length > 1 ? '.' + x[1] : '';
        var rgx = /(\d+)(\d{3})/;
        while (rgx.test(x1))
          x1 = x1.replace(rgx, '$1' + ',' + '$2');
        return prefix + x1 + x2;
      }

      function load_counter(data) {
        var cumulativeNum = data * 1;

        console.log(cumulativeNum)

        cumulativeNum += 17369; // accounting for offline action

        console.log(cumulativeNum)

        var signups = numberFormat(cumulativeNum);

        var signupsnum = signups.replace(",", "");

        var signupstotal = signupsnum;

        var target = 40000;

        var percentageComplete = (signupstotal / target) * 100;

        $(".totalLevel").css("width", percentageComplete + "%");

        $('.amount').text(signups);

        $('.goal').text("40,000");

        $(".goal-progress").addClass('js-percent');

        var getPercent = percentageComplete;
        var getProgressWrapWidth = $('.js-percent .progress-wrp').width();
        var progressTotal = percentageComplete + "%";
        var animationLength = 2500;

        // on page load, animate percentage bar to data percentage length
        // .stop() used to prevent animation queueing
        $('.js-percent .progress-bar').stop().animate({
          left: progressTotal
        }, animationLength);
        var numTruncated = parseFloat(percentageComplete).toFixed(2);
        $('.js-percent .percentage-number').text(numTruncated + "%");
        $(".goal-progress").removeClass('js-percent');

      }

      bQuery.get("/utils/cons_counter/signup_counter.ajax.php?signup_form_id=189", load_counter);
    }



    count_signups();



  });

  // Quiz
  var q1 = 0;
  var q2 = 0;
  var q3 = 0;
  var q4 = 0;
  var q5 = 0;
  var q6 = 0;
  var q7 = 0;

  var q1t = 0;
  var q2t = 0;
  var q3t = 0;
  var q4t = 0;
  var q5t = 0;
  var q6t = 0;
  var q7t = 0;

  var answer = q1 + q2 + q3 + q4 + q5 + q6 + q7;

  $(".q1").click(function() {
    if ($(this).hasClass("q-correct")) {
      q1 = 1;
    } else {
      q1 = 0;
    }
    q1t = $(this).text();
    $('.q1tp').text(q1t);

    if ($(".q1tp").text() == $(".q1tpm").text()) {
      $(".q1tpl").hide();
      $(".q1tpp").prepend("<span class='qmark qtick'>✓ </span>");


    } else {
      $(".q1tpl").css('color', '#e35e14');
      $(".q1tpp").prepend("<span class='qmark qcross'>x </span>");
    }

    nextSlide('.slide1');
  });


  $(".q2").click(function() {
    if ($(this).hasClass("q-correct")) {
      q2 = 1;
    } else {
      q2 = 0;
    }

    q2t = $(this).text();
    $('.q2tp').text(q2t);

    if ($(".q2tp").text() == $(".q2tpm").text()) {
      $(".q2tpl").hide();
      $(".q2tpp").prepend("<span class='qmark qtick'>✓ </span>");
    } else {
      $(".q2tpl").css('color', '#e35e14');
      $(".q2tpp").prepend("<span class='qmark qcross'>x </span>");
    }

    nextSlide('.slide2');
  });

  $(".q3").click(function() {
    if ($(this).hasClass("q-correct")) {
      q3 = 1;
    } else {
      q3 = 0;
    }

    q3t = $(this).text();
    $('.q3tp').text(q3t);

    if ($(".q3tp").text() == $(".q3tpm").text()) {
      $(".q3tpl").hide();
      $(".q3tpp").prepend("<span class='qmark qtick'>✓ </span>");
    } else {
      $(".q3tpl").css('color', '#e35e14');
      $(".q3tpp").prepend("<span class='qmark qcross'>x </span>");
    }

    nextSlide('.slide3');
  });

  $(".q4").click(function() {
    if ($(this).hasClass("q-correct")) {
      q4 = 1;
    } else {
      q4 = 0;
    }

    q4t = $(this).text();
    $('.q4tp').text(q4t);

    if ($(".q4tp").text() == $(".q4tpm").text()) {
      $(".q4tpl").hide();
      $(".q4tpp").prepend("<span class='qmark qtick'>✓ </span>");
    } else {
      $(".q4tpl").css('color', '#e35e14');
      $(".q4tpp").prepend("<span class='qmark qcross'>x </span>");
    }

    nextSlide('.slide4');
  });

  $(".q5").click(function() {
    if ($(this).hasClass("q-correct")) {
      q5 = 1;
    } else {
      q5 = 0;
    }

    q5t = $(this).text();
    $('.q5tp').text(q5t);

    if ($(".q5tp").text() == $(".q5tpm").text()) {
      $(".q5tpl").hide();
      $(".q5tpp").prepend("<span class='qmark qtick'>✓ </span>");
    } else {
      $(".q5tpl").css('color', '#e35e14');
      $(".q5tpp").prepend("<span class='qmark qcross'>x </span>");
    }

    nextSlide('.slide5');
  });

  $(".q6").click(function() {
    if ($(this).hasClass("q-correct")) {
      q6 = 1;
    } else {
      q6 = 0;
    }

    q6t = $(this).text();
    $('.q6tp').text(q6t);

    if ($(".q6tp").text() == $(".q6tpm").text()) {
      $(".q6tpl").hide();
      $(".q6tpp").prepend("<span class='qmark qtick'>✓ </span>");
    } else {
      $(".q6tpl").css('color', '#e35e14');
      $(".q6tpp").prepend("<span class='qmark qcross'>x </span>");
    }

    nextSlide('.slide6');
  });


  $(".q7").click(function() {
    if ($(this).hasClass("q-correct")) {
      q7 = 1;
    } else {
      q7 = 0;
    }

    q7t = $(this).text();
    $('.q7tp').text(q7t);

    if ($(".q7tp").text() == $(".q7tpm").text()) {
      $(".q7tpl").hide();
      $(".q7tpp").prepend("<span class='qmark qtick'>✓ </span>");
    } else {
      $(".q7tpl").css('color', '#e35e14');
      $(".q7tpp").prepend("<span class='qmark qcross'>x </span>");
    }


    var answer = q1 + q2 + q3 + q4 + q5 + q6 + q7;
    $("#scorePrint").text(answer);
    nextSlide('.slide7');

  });

  $(".showPetitionSlide").click(function() {
    nextSlide('.slide8');
  });

  $(".answer").click(function() {
    nextSlide('.slide9');
  });

  $("#signup").submit(function(event) {
    event.preventDefault();
    var $form = $(this),
      url = $form.attr("action");
    var posting = $.post(url, $form.serialize());
    nextSlide('.slide9');
  });

  jQuery('.answer_reveal').click(function(e) {
    jQuery('.answer_reveal_wrap').toggle();
  });

  jQuery('.answer_skip').click(function(e) {
    nextSlide('.slide10');
  });

  jQuery('.twitter_share').click(function(e) {

    var twfirstname = encodeURIComponent("I");

    // if ($('#firstname').val()) {
    //   twfirstname = $('#firstname').val();
    // }

    var twanswer = $('#scorePrint').text();


    var currentUrl = encodeURIComponent("https://act.reprieve.org.uk/page/content/name-the-countries?source=cq2018tw1&utm_source=twitter&utm_medium=post&utm_campaign=countries_quiz&utm_content=1");
    var tweet = encodeURIComponent(" named ");
    var tweet2 = encodeURIComponent(" out of these 10 countries correctly. Do you think you can do better? Take the quiz now! ");
    var twansweren = encodeURIComponent(twanswer);
    var space = encodeURIComponent(" ");
    // var shareimage = encodeURIComponent("https://act.reprieve.org.uk/page/-/CountriesQuizShareQuestionMarks.png");
    window.open("https://twitter.com/intent/tweet?text=" + twfirstname + tweet + twansweren + tweet2 + currentUrl, "_blank", "toolbar=no,scrollbars=no,resizable=yes,width=560,height=560");
    nextSlide('.slide10');
    // initSlider();
  });

  function submitAndShare() {

    var fbfirstname = "I"

    if ($('#firstname').val()) {
      fbfirstname = $('#firstname').val();
    }

    var fbanswer = $('#scorePrint').text();

    var title = fbfirstname + " could name " + fbanswer + " out of these 10 countries!"
    var description = 'Do you think you can do better? Take the quiz now!';


    shareOverrideOGMeta(window.location.href,
      title,
      description);

    nextSlide('.slide10');
    // initSlider();

    return false;


  }

  function shareOverrideOGMeta(overrideLink, overrideTitle, overrideDescription) {
    FB.ui({
        method: 'share_open_graph',
        action_type: 'og.shares',
        action_properties: JSON.stringify({
          object: {
            'og:url': overrideLink,
            'og:title': overrideTitle,
            'og:description': overrideDescription,
            'og:image': 'https://act.reprieve.org.uk/page/-/CountriesQuizShareQuestionMarks.png'
          }
        })
      },
      function(response) {
        // Action after response
      });
  }

  function shareOriginal() {
    FB.ui({
        method: 'share',
        href: 'https://act.reprieve.org.uk/page/content/name-the-countries?source=cq2018fb1&utm_source=facebook&utm_medium=post&utm_campaign=countries_quiz&utm_content=1'
      },
      function(response) {
        // Action after response
      });

    return false;
  }
</script>
