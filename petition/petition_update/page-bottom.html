<div class='fieldset optinradio_fieldset'><label class='optin_lang'>Would you like to receive updates about our news, campaigns and appeals by email? <a href='http://www.reprieve.org.uk/privacy/' target='_blank'>(see our privacy policy)</a></label>
  <label for='optin_1'><input id='optin_1' class='optinradio' name='optin' value='Yes' type='radio'>Yes</label>
  <label for='optin_0'><input id='optin_0' class='optinradio' name='optin' value='No' type='radio'>No</label>
  <p id='optin_warning'>Don't want to hear from us? If you're already on our mailing list, selecting this option may unsubscribe you from our alerts.</p>
</div>
</div>
</div>
</div>
</div>

<div class="slide2 slide darkslide" style="display: none;">

  <div class="container">
    <div class="row">
      <div class="col-md">
        <!-- TODO: Edit text above share buttons below. Place to edit Twitter and Facebook text itself is further down. -->
        <h2>Thank you <span class="first_name"></span> for joining our email action list!</h2>
        <p>If you'd like instant updates, why not follow us on social media?</p>
     <div class="social-slide-container">
        <a class="solid button facebook_follow social-3" href="https://facebook.com/ReprieveHQ" target="_blank">Follow on Facebook </a><a class="solid button twitter_follow social-3" href="https://twitter.com/Reprieve" target="_blank">Follow on Twitter</a> <a class="solid button instagram_follow social-3" href="https://www.instagram.com/reprievehq" target="_blank">Follow on Instagram</a>
            <button class="button outline social-3" id="slide2_skip">Skip</button>
    </div>
      </div>
    </div>
  </div>
</div>


<div class="slide3 slide darkslide" style="display: none;">



  <div class="container">
    <div class="row">
      <div class="col-md">
<!-- TODO: Add text to convince people to donate below! You may not need three lines, so feel free to delete the <p></p> section if not. -->
        <div class="unsigned">
          <h2>Can you help make our life-saving work possible?</h2>
          <p>We fund the litigation, expert witnesses and investigations which help to deliver justice and save lives across the globe.</p>
<p>Can you make a donation today so we can continue to help victims of injustice?</p>

        </div>

<!-- TODO: Change URLs below to URL of relevant donation page. PLEASE rememember to create a source code. -->

<div class="donate-tab-container">
  <div class="donate-tab-top clearfix">
    <div class="donate-tab-gm donate-tab picked-tab">
      <h2>Give Monthly</h2>
    </div>
    <div class="donate-tab-gn donate-tab">
      <h2>Give Now</h2>
    </div>
  </div>
  <div class="donate-tab-main clearfix">
    <div class="donate-tab-givemonthly donate-tab-body picked-body">
      <p>Giving monthly helps us fund long-term projects and cases.</p>
      <a class="button solid small donateButton donateMButton" href="https://secure.edirectdebit.com/Reprieve/Donate4/?ref=joinemaildmslide&amount=5">£5</button>
      <a class="button solid small donateButton donateMButton" href="https://secure.edirectdebit.com/Reprieve/Donate4/?ref=joinemaildmslide&amount=10">£10</button>
      <a class="button solid small donateButton donateMButton" href="https://secure.edirectdebit.com/Reprieve/Donate4/?ref=joinemaildmslide&amount=15">£15</button>
      <a class="button outline small donateButton donateMButton" href="https://secure.edirectdebit.com/Reprieve/Donate4/?ref=joinemaildmslide">Other</button>
    </div>
    <div class="donate-tab-givenow donate-tab-body">
      <p>Give an individual donation now to fund our most urgent cases.</p>
      <a class="button solid small donateButton donateNButton" href="https://act.reprieve.org.uk/page/contribute/email-thank-you?source=joinemaildnslide&default_amt=15">£15</button>
      <a class="button solid small donateButton donateNButton" href="https://act.reprieve.org.uk/page/contribute/email-thank-you?source=joinemaildnslide&default_amt=25">£25</button>
      <a class="button solid small donateButton donateNButton" href="https://act.reprieve.org.uk/page/contribute/email-thank-you?source=joinemaildnslide&default_amt=50">£50</button>
      <a class="button outline small donateButton donateNButton" href="https://act.reprieve.org.uk/page/contribute/email-thank-you?source=joinemaildnslide">Other</button>
    </div>
  </div>
</div>

      </div>
    </div>
  </div>
</div>
</div>
<footer id="footer" class="footer">
  <div class="container clearfix">
    <ul class="fnav_sub_primary clearfix">
      <li class="fnav_sub_primary_block first">
        <a href="http://www.reprieve.org.uk" rel="external" class="fnav_sub_element">Reprieve</a>
      </li>
      <li class="fnav_sub_primary_block">
        <a href="http://www.reprieve.org/" rel="external" class="fnav_sub_element">Reprieve US</a>
      </li>
      <li class="fnav_sub_primary_block">
        <a href="http://www.reprieve.org.uk/accessibility/" rel="external" class="fnav_sub_element">Accessibility</a>
      </li>
      <li class="fnav_sub_primary_block">
        <a href="http://www.reprieve.org.uk/privacy/" rel="external" class="fnav_sub_element">Privacy</a>
      </li>
      <li class="fnav_sub_primary_block">
        <a href="https://www.reprieve.org.uk/terms-of-use/" rel="external" class="fnav_sub_element">Terms of use</a>
      </li>
      <li class="fnav_sub_primary_block">
        <a href="https://www.reprieve.org.uk/cookies-policy/" rel="external" class="fnav_sub_element">Cookies</a>
      </li>
      <li class="fnav_sub_primary_block">
        <a href="https://www.reprieve.org.uk/acceptable-use//" rel="external" class="fnav_sub_element">Acceptable Use</a>
      </li>
    </ul>
    <div class="fnav_sub_secondary clearfix">
      <p class="fnav_sub_element">© 2018 Reprieve. Registered charity (No. 1114900).</p>
    </div>
  </div>
</footer>
<div class="mobilemenu-wrapper">
  <div class="mobilemenu-trigger">
    <div class="hamburger is-active" id="hamburger-2">
      <span class="line"></span>
      <span class="line"></span>
      <span class="line"></span>
    </div>
  </div>
  <nav id="mobilemenu">
    <div class="menu">
      <ul id="menu-mobile-menu">
        <li class="menu-item"><a href="https://reprieve.org.uk/">Home</a></li>
        <li class="menu-item"><a href="https://reprieve.org.uk/about/">About</a></li>
        <li class="menu-item"><a href="https://act.reprieve.org.uk/page/s/join">Join us</a></li>
        <li class="menu-item"><a href="https://act.reprieve.org.uk/page/contribute/make-a-donation">Donate now</a></li>
        <li class="menu-item"><a href="https://secure.edirectdebit.com/Reprieve/Donate/">Donate monthly</a></li>
        <li class="menu-item"><a href="https://reprieve.org.uk/contact/">Contact</a></li>
      </ul>
    </div>

  </nav>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>
<script type="text/javascript" async src="https://platform.twitter.com/widgets.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"></script>
<script>
  // Organise
  $("#form-wrap").prependTo("#signup");
  $("#signup .fieldset").appendTo("#form-wrap");
  $("#signup").appendTo("#right");
  $(".optinradio_fieldset").insertBefore("#bsd-field-email_opt_in");

  // Placeholder

  $("span.required").remove();
  $("label").each(function() {
    var label = $(this);
    var placeholder = label.text();
    label.closest(".fieldset").find("input[type=text], input[type=email], textarea").attr("placeholder", placeholder).val("").focus().blur();
  });


  // GDPR

  $(".bsd-contribForm-gdpr-modal-content h3, .bsd-contribForm-gdpr-modal-content p").wrapAll("<div class='col-md-10'>");
  $(".bsd-contribForm-gdpr-modal-content div:nth-of-type(2), .bsd-contribForm-gdpr-modal-content div:nth-of-type(3)").wrap("<div class='col-md-2'>");
  $(".bsd-contribForm-gdpr-modal-content").addClass("container");
  $(".bsd-contribForm-gdpr-modal-content p:nth-of-type(3)").remove();

  // MENU

  $("#hamburger-1").click(function() {
    $("#hamburger-2").toggleClass("is-active");
    $(".mobilemenu-wrapper").toggleClass("menu-active");
  });

  $("#hamburger-2").click(function() {
    $("#hamburger-2").toggleClass("is-active");
    $(".mobilemenu-wrapper").toggleClass("menu-active");
  });


  // Expander

  $('#expand').on('click', function(e) {
    $('#expand-box').toggleClass("toggle-expand");
    $('#expand-minus').toggleClass("toggle-expand");
    $('#expand-plus').toggleClass("toggle-collapse");
    e.preventDefault();
  });

// Donate picker

  $(".donate-tab-gm").click(function() {
    $(".donate-tab-gn").removeClass("picked-tab");
    $(".donate-tab-gm").addClass("picked-tab");
    $(".donate-tab-givenow").removeClass("picked-body");
    $(".donate-tab-givemonthly").addClass("picked-body");
  });
  $(".donate-tab-gn").click(function() {
    $(".donate-tab-gm").removeClass("picked-tab");
    $(".donate-tab-gn").addClass("picked-tab");
    $(".donate-tab-givemonthly").removeClass("picked-body");
    $(".donate-tab-givenow").addClass("picked-body");
  });

  // Optin

  jQuery("#optin_1").change(function() {
    if (jQuery(this).is(":checked")) {
      jQuery('#email_opt_in').prop('checked', true);
      $("#optin_warning").hide();
    }
  });


  jQuery("#optin_0").change(function() {
    if (jQuery(this).is(":checked")) {
      jQuery('#email_opt_in').prop('checked', false);
      $("#optin_warning").show();
    }
  });


  // Data

  var voteName = "Supporter";

  $("#firstname").change(function() {
    voteName = $(this).val();
    $('.first_name').text(voteName)
  });


  $("#signup").submit(function(event) {
    event.preventDefault();
    var $form = $(this),
      url = $form.attr("action");
    var posting = $.post(url, $form.serialize());
    nextSlide('.slide1');
  });



  // SHARING



  jQuery('.twitter_share').click(function(e) {
    var currentUrl = encodeURIComponent(getPathFromUrl(window.location.href));
    // <!-- TODO: Insert Tweet text below! -->
    var tweet = encodeURIComponent(
      "UK Torture - the government is rewriting our country’s torture rules in secret. I'm calling for an open and transparent process to put an end to UK torture complicity. Add your name now! #EndUKTorture");
    var space = encodeURIComponent(" ");
    window.open("https://twitter.com/intent/tweet?text=" + tweet + space + currentUrl, "_blank", "toolbar=no,scrollbars=no,resizable=yes,width=560,height=560");
    nextSlide('.slide2');
    // initSlider();
  });

  jQuery('.twitter_share').click(function(e) {
    nextSlide('.slide2');
    // initSlider();
  });

  jQuery('#slide2_skip').click(function(e) {
    e.preventDefault();
    nextSlide('.slide2');
    // initSlider();
  });

  var getPathFromUrl = function getPathFromUrl(url) {
    return url.split("?")[0];
  };


  var numberWithCommas = function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  };

  var nextSlide = function nextSlide(el) {
    var marginHeight = jQuery('.top_margin').height();
    var nextSlide = jQuery(el).closest('.slide').next();
    // if (el === '.slide1') {
    //   jQuery('.first_name').html(userInfo.firstname);
    // }
    nextSlide.show();
    jQuery.scrollTo(nextSlide, 1000, {});
  };


  (function(l) {
    'use strict';
    l(['jquery'], function($) {
      var k = $.scrollTo = function(a, b, c) {
        return $(window).scrollTo(a, b, c);
      };
      k.defaults = {
        axis: 'xy',
        duration: 0,
        limit: true
      };

      function isWin(a) {
        return !a.nodeName || $.inArray(a.nodeName.toLowerCase(), ['iframe', '#document', 'html', 'body']) !== -1;
      }
      $.fn.scrollTo = function(f, g, h) {
        if (typeof g === 'object') {
          h = g;
          g = 0;
        }
        if (typeof h === 'function') {
          h = {
            onAfter: h
          };
        }
        if (f === 'max') {
          f = 9e9;
        }
        h = $.extend({}, k.defaults, h);
        g = g || h.duration;
        var j = h.queue && h.axis.length > 1;
        if (j) {
          g /= 2;
        }
        h.offset = both(h.offset);
        h.over = both(h.over);
        return this.each(function() {
          if (f === null) return;
          var d = isWin(this),
            elem = d ? this.contentWindow || window : this,
            $elem = $(elem),
            targ = f,
            attr = {},
            toff;
          switch (typeof targ) {
            case 'number':
            case 'string':
              if (/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)) {
                targ = both(targ);
                break;
              }
              targ = d ? $(targ) : $(targ, elem);
              if (!targ.length) return;
            case 'object':
              if (targ.is || targ.style) {
                toff = (targ = $(targ)).offset();
              }
          }
          var e = $.isFunction(h.offset) && h.offset(elem, targ) || h.offset;
          $.each(h.axis.split(''), function(i, a) {
            var b = a === 'x' ? 'Left' : 'Top',
              pos = b.toLowerCase(),
              key = 'scroll' + b,
              prev = $elem[key](),
              max = k.max(elem, a);
            if (toff) {
              attr[key] = toff[pos] + (d ? 0 : prev - $elem.offset()[pos]);
              if (h.margin) {
                attr[key] -= parseInt(targ.css('margin' + b), 10) || 0;
                attr[key] -= parseInt(targ.css('border' + b + 'Width'), 10) || 0;
              }
              attr[key] += e[pos] || 0;
              if (h.over[pos]) {
                attr[key] += targ[a === 'x' ? 'width' : 'height']() * h.over[pos];
              }
            } else {
              var c = targ[pos];
              attr[key] = c.slice && c.slice(-1) === '%' ? parseFloat(c) / 100 * max : c;
            }
            if (h.limit && /^\d+$/.test(attr[key])) {
              attr[key] = attr[key] <= 0 ? 0 : Math.min(attr[key], max);
            }
            if (!i && h.axis.length > 1) {
              if (prev === attr[key]) {
                attr = {};
              } else if (j) {
                animate(h.onAfterFirst);
                attr = {};
              }
            }
          });
          animate(h.onAfter);

          function animate(a) {
            var b = $.extend({}, h, {
              queue: true,
              duration: g,
              complete: a && function() {
                a.call(elem, targ, h);
              }
            });
            $elem.animate(attr, b);
          }
        });
      };
      k.max = function(a, b) {
        var c = b === 'x' ? 'Width' : 'Height',
          scroll = 'scroll' + c;
        if (!isWin(a)) return a[scroll] - $(a)[c.toLowerCase()]();
        var d = 'client' + c,
          doc = a.ownerDocument || a.document,
          html = doc.documentElement,
          body = doc.body;
        return Math.max(html[scroll], body[scroll]) - Math.min(html[d], body[d]);
      };

      function both(a) {
        return $.isFunction(a) || $.isPlainObject(a) ? a : {
          top: a,
          left: a
        };
      }
      $.Tween.propHooks.scrollLeft = $.Tween.propHooks.scrollTop = {
        get: function get(t) {
          return $(t.elem)[t.prop]();
        },
        set: function set(t) {
          var a = this.get(t);
          if (t.options.interrupt && t._last && t._last !== a) {
            return $(t.elem).stop();
          }
          var b = Math.round(t.now);
          if (a !== b) {
            $(t.elem)[t.prop](b);
            t._last = this.get(t);
          }
        }
      };
      return k;
    });
  })(typeof define === 'function' && define.amd ? define : function(a, b) {
    'use strict';
    if (typeof module !== 'undefined' && module.exports) {
      module.exports = b(require('jquery'));
    } else {
      b(jQuery);
    }
  });

  function submitAndShare() {

    var firstname = $("#firstname").val();

    // <!-- TODO: Insert Facebook Title and Description below -->

    var title = 'The UK government is secretly rewriting the rules on torture: Join ' + firstname + ' and sign petition now!';
    var description = 'We are calling for an open and transparent process to put an end to UK torture complicity.';

    shareOverrideOGMeta(window.location.href,
      title,
      description);

    nextSlide('.slide2');


    return false;


  }

  function shareOverrideOGMeta(overrideLink, overrideTitle, overrideDescription) {
    FB.ui({
        method: 'share_open_graph',
        action_type: 'og.shares',
        action_properties: JSON.stringify({
          object: {
            'og:url': overrideLink,
            'og:title': overrideTitle,
            'og:description': overrideDescription,
            // <!-- TODO: Insert Facebook image link below -->
            'og:image': 'https://FACEBOOKIMAGE.png'

          }
        })
      },
      function(response) {
        // Action after response
      });
  }

  function shareOriginal() {
    FB.ui({
        method: 'share',
        href: window.location.href
      },
      function(response) {
        // Action after response
      });

    return false;
  }
</script>
